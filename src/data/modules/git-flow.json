{
  "module": {
    "id": "git-flow",
    "title": "Git Flow & Workflows",
    "description": "Organize your team work with Git Flow and best branching practices",
    "icon": "GitBranch",
    "requiredXp": 700,
    "color": "from-cyan-400 to-blue-600",
    "courseId": "git"
  },
  "lessons": [
    {
      "id": "git-flow-intro",
      "moduleId": "git-flow",
      "title": "Introduction to Git Workflows",
      "order": 1,
      "difficulty": "beginner",
      "content": "# Essential to know\n- Workflow = convention on how to use Git as a team\n- Git Flow = structured workflow with specific branches\n- GitHub Flow = simple workflow centered on PRs\n- Trunk-Based Development = direct commits on main\n- The right workflow depends on team size and release frequency\n\n---\n\n# Git Workflows: Organizing Team Work\n\n## Why a Workflow?\n\nWithout convention, chaos:\n- ❌ Everyone commits on main\n- ❌ Constant conflicts\n- ❌ Broken code in production\n- ❌ Impossible to know who does what\n\n**With a workflow:**\n- ✅ Code review before merge\n- ✅ Isolated branches for features\n- ✅ Stable releases\n- ✅ Quick hotfixes\n\n## Main Workflows\n\n### 1. GitHub Flow (Simple, recommended)\n**For:** Small teams, continuous deployment\n\n```\nmain ─────────────────────────────────\n       \\                              /\nfeature ━━━━ PR ━━━━━━━━━━━━━━━━━━━━━━✓\n```\n\n**Rules:**\n- Only one main branch: `main`\n- Create a branch for each feature/bugfix\n- Open a Pull Request\n- Review + tests before merge\n- Automatic deploy from main\n\n**Advantages:** Simple, fast, ideal for CI/CD\n\n---\n\n### 2. Git Flow (Structured, enterprise)\n**For:** Large teams, planned releases\n\n```\ndevelop  ───────○──○──○─────────────────○──\n               /      \\                   /\\\\\\\\nfeature-a ○──○          \\feature-b ○──○──○     \\\\\\\\n                         \\\\\\\\nmain  ────────────────────●──────────────●──\n                           \\               \\\\\\\\ntag v1.0                   tag v1.1\n                            \\hotfix  ○──○──────────────✓\n```\n\n**Branches:**\n- `main`: Production code (stable)\n- `develop`: Development branch\n- `feature/*`: New features\n- `release/*`: Release preparation\n- `hotfix/*`: Urgent production fixes\n\n---\n\n### 3. Trunk-Based Development\n**For:** Very large teams, multiple releases per day\n\n```\nmain ──○──○──○──○──○──○──○──○──○──○──\n       ↑  ↑  ↑  ↑  ↑  ↑  ↑  ↑  ↑  ↑\n      Short-lived feature flags\n```\n\n**Rules:**\n- Everyone commits on main\n- Feature flags to hide unfinished features\n- Maximum 1-day branches\n- Pair programming\n\n---\n\n## Comparison\n\n| Criteria | GitHub Flow | Git Flow | Trunk-Based |\n|----------|-------------|----------|-------------|\n| **Complexity** | ⭐ Simple | ⭐⭐⭐ Complex | ⭐⭐ Medium |\n| **Team size** | 2-10 people | 10+ people | 50+ people |\n| **Release frequency** | Continuous | Planned | Multiple/day |\n| **Branches** | 2 types | 5 types | 1 type |\n| **Code review** | PR | PR | Pair programming |\n| **Tools needed** | GitHub/GitLab | Git Flow CLI | Feature flags |\n\n## Which Workflow to Choose?\n\n**Choose GitHub Flow if:**\n- Startup or small team\n- Continuous deployment\n- Website/SaaS application\n- You want simplicity\n\n**Choose Git Flow if:**\n- Software with versions (v1.0, v2.0)\n- Planned releases (monthly)\n- Need hotfixes\n- Enterprise with strict process\n\n**Choose Trunk-Based if:**\n- Google/Facebook scale\n- Multiple releases per day\n- Feature flags already in place\n- Senior developers only",
      "codeExample": "# Workflow comparison in practice\n\n# ========== GITHUB FLOW ==========\n# Simple and fast workflow\n\n# 1. Create a feature branch\ngit checkout -b feature/login\n\n# 2. Develop\ngit commit -m \"Add login form\"\ngit commit -m \"Add validation\"\n\n# 3. Push and create PR\ngit push -u origin feature/login\n# → Create PR on GitHub\n# → Review + Tests\n# → Merge to main\n\n# 4. Automatic deploy from main\n\n\n# ========== GIT FLOW ==========\n# Install: npm install -g git-flow-avh\n\n# Initialize Git Flow\ngit flow init\n\n# New feature\ngit flow feature start authentication\n# → Creates feature/authentication branch from develop\n\n# Develop...\ngit commit -m \"Add auth\"\n\n# Finish feature\ngit flow feature finish authentication\n# → Merge to develop\n# → Delete feature branch\n\n# Prepare release\ngit flow release start 1.2.0\n# → Creates release/1.2.0 branch from develop\n\n# Release bugfixes...\ngit commit -m \"Fix version number\"\n\n# Finish release\ngit flow release finish 1.2.0\n# → Merge to main (tag v1.2.0)\n# → Merge to develop\n\n# Urgent hotfix\ngit flow hotfix start 1.2.1\n# → Creates from main\n\ngit commit -m \"Fix critical bug\"\n\ngit flow hotfix finish 1.2.1\n# → Merge to main AND develop"
    },
    {
      "id": "github-flow",
      "moduleId": "git-flow",
      "title": "GitHub Flow in Practice",
      "order": 2,
      "difficulty": "beginner",
      "content": "# Essential to know\n- GitHub Flow = simple workflow with main + feature branches\n- Only one main branch: main\n- Short feature branches (1-2 days max)\n- Pull Request required for merge\n- Automatic tests before merge\n- Automatic deployment from main\n- Standard for open source and startups\n\n---\n\n# GitHub Flow: The Modern Workflow\n\n## GitHub Flow Rules\n\n### 1. Everything on main is deployable\n\nThe `main` branch is always stable and ready for production.\n\n### 2. Create a descriptive branch\n\n```bash\n# Good naming practices\ngit checkout -b feature/user-authentication\ngit checkout -b fix/login-error\ngit checkout -b docs/api-documentation\ngit checkout -b refactor/button-component\n```\n\n### 3. Frequent commits\n\n```bash\ngit commit -m \"Add login form UI\"\ngit commit -m \"Implement email validation\"\ngit commit -m \"Add error messages\"\n```\n\n### 4. Open Pull Request early\n\n**Don't wait until you're finished!**\n\n```bash\ngit push -u origin feature/authentication\n```\n\nThen create PR on GitHub with:\n- Descriptive title\n- Description of changes\n- Screenshots if UI\n- Test checklist\n\n### 5. Discussion and Review\n\n**For the author:**\n- Respond to comments\n- Make requested changes\n- Re-request review when ready\n\n**For the reviewer:**\n- Check code\n- Test locally if necessary\n- Approve or request changes\n\n### 6. Merge after validation\n\n**Merge options:**\n- **Create a merge commit**: Keep complete history\n- **Squash and merge**: Merge into single commit\n- **Rebase and merge**: Linear history\n\n**Recommended:** Squash for features, merge for hotfixes\n\n### 7. Deploy immediately\n\n```bash\n# Push to main triggers deployment\ngit checkout main\ngit pull origin main\n```\n\n## Complete Workflow: Example\n\n```bash\n# 1. Sync\ngit checkout main\ngit pull origin main\n\n# 2. Create feature branch\ngit checkout -b feature/contact-form\n\n# 3. Develop\necho \"Contact form code\" > contact.html\ngit add .\ngit commit -m \"Add contact form\"\n\n# 4. Push\ngit push -u origin feature/contact-form\n\n# 5. Create PR on GitHub\n# → Add description\n# → Request review\n\n# 6. Review\n# → Address comments\ngit add .\ngit commit -m \"Fix review comments\"\ngit push\n\n# 7. Merge on GitHub\n# → Squash and merge\n\n# 8. Cleanup\ngit checkout main\ngit pull origin main\ngit branch -d feature/contact-form\ngit push origin --delete feature/contact-form\n\n# 9. Deploy (automatic or manual)\n```\n\n## PR Description Template\n\n```markdown\n## Description\nBrief description of what this PR does\n\n## Type of Change\n- [ ] Bug fix\n- [ ] New feature\n- [ ] Breaking change\n- [ ] Documentation\n\n## How Has This Been Tested?\n- [ ] Unit tests\n- [ ] Integration tests\n- [ ] Manual testing\n\n## Screenshots (if applicable)\nAdd screenshots to help explain your changes\n\n## Checklist\n- [ ] My code follows style guidelines\n- [ ] I performed a self-review\n- [ ] I commented my code\n- [ ] My changes generate no new warnings\n- [ ] I added tests proving my fix/feature works\n- [ ] New and existing tests pass\n\n## Related Issues\nCloses #123\n```\n\n## Review Best Practices\n\n### For the author:\n- Keep PRs small (< 400 lines)\n- Add clear description\n- Respond quickly to comments\n- Test before requesting review\n\n### For the reviewer:\n- Review within 24h\n- Be constructive\n- Approve if only minor issues\n- Test locally if complex\n\n## Common Mistakes\n\n❌ **Too big PR**\nSplit into smaller PRs\n\n❌ **No description**\nAlways explain what and why\n\n❌ **Merge without review**\nEven if urgent, get at least one approval\n\n❌ **Forget to delete branch**\nClean up after merge",
      "codeExample": "# GitHub Pull Request template\n\n## Description\nBrief description of what this PR does\n\n## Type of Change\n- [ ] Bug fix\n- [ ] New feature\n- [ ] Breaking change\n- [ ] Documentation\n\n## How Has This Been Tested?\n- [ ] Unit tests\n- [ ] Integration tests\n- [ ] Manual testing\n\n## Screenshots (if applicable)\nAdd screenshots to help explain your changes\n\n## Checklist\n- [ ] My code follows the style guidelines\n- [ ] I have performed a self-review\n- [ ] I have commented my code\n- [ ] My changes generate no new warnings\n- [ ] I have added tests that prove my fix/feature works\n- [ ] New and existing tests pass\n\n## Related Issues\nCloses #123\n\n\n# Script to automate workflow\n#!/bin/bash\n\n# create-feature.sh\nFEATURE_NAME=$1\n\nif [ -z \"$FEATURE_NAME\" ]; then\n  echo \"Usage: ./create-feature.sh feature-name\"\n  exit 1\nfi\n\ngit checkout main\ngit pull origin main\ngit checkout -b feature/$FEATURE_NAME\n\necho \"Feature branch feature/$FEATURE_NAME created!\"\necho \"Start coding and commit regularly.\"\n\n\n# submit-pr.sh\nBRANCH=$(git branch --show-current)\n\ngit push -u origin $BRANCH\n\n# Open GitHub to create PR\nREPO_URL=$(git remote get-url origin | sed 's/.*://' | sed 's/\\.git$//')\nopen \"https://github.com/$REPO_URL/pull/new/$BRANCH\"\n\necho \"Create your PR on GitHub!\""
    },
    {
      "id": "git-flow-detailed",
      "moduleId": "git-flow",
      "title": "Advanced Git Flow",
      "order": 3,
      "difficulty": "intermediate",
      "content": "# Essential to know\n- Git Flow = 5 branch types with specific roles\n- main = stable production (version tags)\n- develop = continuous integration of features\n- feature/* = isolated development\n- release/* = stabilization before production\n- hotfix/* = urgent production fixes\n- git-flow CLI automates operations\n\n---\n\n# Git Flow in Detail\n\n## The 5 Branch Types\n\n### 1. main (Production)\n- Deployed production code\n- Only hotfixes and releases touch it\n- Each commit = tagged version (v1.0, v1.1...)\n\n### 2. develop (Development)\n- Integration branch\n- Features merged here\n- Should stay stable but may have bugs\n- Base for new features\n\n### 3. feature/* (Features)\n- Created from develop\n- One per feature\n- Merged to develop\n- Deleted after merge\n\n### 4. release/* (Releases)\n- Created from develop when ready for prod\n- Version bump, final fixes\n- Merged to main AND develop\n- Tagged with version number\n\n### 5. hotfix/* (Urgent fixes)\n- Created from main\n- Production is broken!\n- Merged to main AND develop\n- Tagged with patch version (v1.0.1)\n\n## Complete Diagram\n\n```\nmain:    ●────────●────────●────────●────────●\n         ↑        ↑        ↑        ↑        ↑\n       v1.0     v1.0.1   v1.1     v1.1.1   v1.2\n                  ↑                 ↑\n               hotfix           hotfix\n\ndevelop: ●──○──○──●──○──○──○──●──○──●──○──●\n             /      \\         /      /     \\\\\\\\nfeature/a ○──○        \\       /      /       \\\\\\\\n                      \\feature/b ○──○──○    /       \\\\\\\\                                         \\\\\\\\release/1.1 ──────────────○──○──●                 \\\\\\\\                                         \\\\\\\\release/1.2 ────────────────────────────○──○──●\n```\n\n## Installation and Configuration\n\n```bash\n# Install git-flow\n# macOS\nbrew install git-flow-avh\n\n# Ubuntu/Debian\nsudo apt-get install git-flow\n\n# Windows (Git Bash)\nhttps://github.com/petervanderdoes/gitflow-avh/wiki/Installing-on-Windows\n```\n\n### Initialize Git Flow\n\n```bash\n# In an existing repository\ngit flow init\n\n# Answer questions (or press Enter for defaults)\nNo branches exist yet. Base branches must be created now.\nBranch name for production releases: [main]\nBranch name for \"next release\" development: [develop]\n\nFeature branches? [feature/]\nRelease branches? [release/]\nHotfix branches? [hotfix/]\nSupport branches? [support/]\nVersion tag prefix? [] v\n```\n\n## Feature Workflow\n\n```bash\n# Start feature\ngit flow feature start user-profile\n# Creates and switches to feature/user-profile from develop\n\n# Develop...\ngit commit -m \"Add profile page\"\ngit commit -m \"Add avatar upload\"\n\n# Finish feature\ngit flow feature finish user-profile\n# Merges to develop\n# Deletes feature/user-profile\n# Switches to develop\n```\n\n## Release Workflow\n\n```bash\n# Start release (when develop is stable)\ngit flow release start 1.3.0\n# Creates release/1.3.0 from develop\n\n# Version bump, final fixes\ngit commit -m \"Update version to 1.3.0\"\ngit commit -m \"Fix changelog\"\n\n# Finish release\ngit flow release finish 1.3.0\n# Merges to main (tag v1.3.0)\n# Merges to develop\n# Deletes release/1.3.0\n```\n\n## Hotfix Workflow (URGENT)\n\n```bash\n# Production is broken!\ngit flow hotfix start 1.3.1\n# Creates hotfix/1.3.1 from main\n\n# Fix quickly\ngit commit -m \"Fix: correct API endpoint\"\n\n# Finish hotfix\ngit flow hotfix finish 1.3.1\n# Merges to main (tag v1.3.1)\n# Merges to develop\n# Deletes hotfix/1.3.1\n```\n\n## Semantic Versioning\n\nGit Flow uses SemVer: `MAJOR.MINOR.PATCH`\n\n- **MAJOR**: Breaking changes\n- **MINOR**: New features (backward compatible)\n- **PATCH**: Bug fixes\n\nExamples: v1.0.0 → v1.1.0 → v1.1.1 → v2.0.0\n\n## Without git-flow CLI\n\nIf you can't install the CLI:\n\n```bash\n# Feature\ngit checkout develop\ngit checkout -b feature/my-feature\n# ... work ...\ngit checkout develop\ngit merge --no-ff feature/my-feature\ngit branch -d feature/my-feature\n\n# Release\ngit checkout develop\ngit checkout -b release/1.0.0\n# ... bump version ...\ngit checkout main\ngit merge --no-ff release/1.0.0\ngit tag v1.0.0\ngit checkout develop\ngit merge --no-ff release/1.0.0\ngit branch -d release/1.0.0\n```",
      "codeExample": "# Complete Git Flow workflow\n\n# ========== NORMAL DEVELOPMENT ==========\n\n# 1. Start a feature\ngit flow feature start payment-gateway\n\n# 2. Develop\ngit commit -m \"Add Stripe integration\"\ngit commit -m \"Add payment form\"\n\n# 3. Finish feature\ngit flow feature finish payment-gateway\n# → Merge to develop\n\n\n# ========== PREPARE RELEASE ==========\n\n# 1. develop is stable, we want to release\ngit flow release start 2.3.0\n\n# 2. Final fixes\ngit commit -m \"Update version to 2.3.0\"\ngit commit -m \"Fix typo in about page\"\n\n# 3. Finish release\ngit flow release finish 2.3.0\n# → Tag v2.3.0 on main\n# → Merge to develop\n\n# 4. Push\ngit push origin main --tags\ngit push origin develop\n\n\n# ========== URGENT HOTFIX ==========\n\n# PROD is broken!\n# v2.3.0 has a critical bug\n\n# 1. Create hotfix\ngit flow hotfix start 2.3.1\n\n# 2. Fix\ngit commit -m \"Fix: API endpoint returning 500\"\n\n# 3. Finish (merge to main AND develop)\ngit flow hotfix finish 2.3.1\n\n# 4. Deploy\ngit push origin main --tags\n\n\n# ========== VERSION MANAGEMENT ==========\n\n# View tags\ngit tag -l\n\n# Push specific tag\ngit push origin v2.3.0\n\n# Checkout specific version\ngit checkout v2.3.0\n\n# Create branch from tag\ngit checkout -b hotfix-legacy v1.5.0\n\n\n# ========== USEFUL COMMANDS ==========\n\n# List ongoing features\ngit branch | grep feature\n\n# See where we are\ngit flow feature list\ngit flow release list\n\n# Abandon a feature\ngit flow feature finish -F authentication  # Force without merge\ngit branch -D feature/authentication"
    }
  ],
  "exercises": [
    {
      "id": "flow-ex-1",
      "lessonId": "git-flow-intro",
      "moduleId": "git-flow",
      "title": "Workflows Quiz",
      "difficulty": "easy",
      "type": "quiz",
      "questions": [
        {
          "question": "Which workflow is recommended for a small team with continuous deployment?",
          "options": [
            "Git Flow",
            "GitHub Flow",
            "Trunk-Based Development",
            "No workflow"
          ],
          "correctAnswer": 1,
          "explanation": "GitHub Flow is simple, fast, and ideal for teams that deploy frequently. It has only one main branch (main) and short feature branches."
        },
        {
          "question": "In Git Flow, on which branch do you create a feature?",
          "options": [
            "main",
            "develop",
            "release",
            "hotfix"
          ],
          "correctAnswer": 1,
          "explanation": "Feature branches are created from develop and merged to develop. Only releases and hotfixes touch main."
        },
        {
          "question": "What is the main advantage of rebase in a workflow?",
          "options": [
            "It's faster",
            "Clean and linear history",
            "No tests needed",
            "Multiple people can work on the same branch"
          ],
          "correctAnswer": 1,
          "explanation": "Rebase produces a linear history without merge commits, making it easier to read and debug history."
        }
      ]
    },
    {
      "id": "flow-ex-2",
      "lessonId": "github-flow",
      "moduleId": "git-flow",
      "title": "GitHub Flow Quiz",
      "difficulty": "easy",
      "type": "quiz",
      "questions": [
        {
          "question": "When should you open a Pull Request in GitHub Flow?",
          "options": [
            "When the feature is 100% finished",
            "As early as possible, even if not finished",
            "Never",
            "Once per week"
          ],
          "correctAnswer": 1,
          "explanation": "In GitHub Flow, open a PR early to get quick feedback. You can put [WIP] in the title if it's not finished."
        },
        {
          "question": "What is the ideal PR size?",
          "options": [
            "5000 lines of code",
            "200-400 lines",
            "1 line",
            "It doesn't matter"
          ],
          "correctAnswer": 1,
          "explanation": "A PR of 200-400 lines is ideal: small enough to be reviewed quickly (30 min), large enough to be coherent."
        },
        {
          "question": "What does 'LGTM' mean in a review?",
          "options": [
            "Let's Go To Market",
            "Looks Good To Me",
            "Large Git Tree Merge",
            "Last Git Test Message"
          ],
          "correctAnswer": 1,
          "explanation": "LGTM = 'Looks Good To Me'. It's a common approval indicating the code has been reviewed and is approved."
        }
      ]
    },
    {
      "id": "flow-ex-3",
      "lessonId": "git-flow-detailed",
      "moduleId": "git-flow",
      "title": "Git Flow Quiz",
      "difficulty": "medium",
      "type": "quiz",
      "questions": [
        {
          "question": "Which branch in Git Flow receives hotfixes?",
          "options": [
            "develop",
            "feature",
            "main",
            "release"
          ],
          "correctAnswer": 2,
          "explanation": "Hotfixes are created from main (production) and merged to main AND develop to quickly fix a critical bug in production."
        },
        {
          "question": "What happens when you finish a release in Git Flow?",
          "options": [
            "It is deleted",
            "It is merged to main AND develop",
            "It becomes a feature",
            "Nothing"
          ],
          "correctAnswer": 1,
          "explanation": "When a release is finished, it is merged to main (with a version tag) AND to develop so fixes are in both branches."
        },
        {
          "question": "Which versioning convention is used with Git Flow?",
          "options": [
            "Date (2023.12.20)",
            "SemVer (1.2.3)",
            "Commit hash",
            "Build number"
          ],
          "correctAnswer": 1,
          "explanation": "Git Flow uses Semantic Versioning (SemVer): MAJOR.MINOR.PATCH (ex: v2.3.1) to indicate the type of changes."
        }
      ]
    }
  ]
}