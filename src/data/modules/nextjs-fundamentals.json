{
  "module": {
    "id": "nextjs-fundamentals",
    "title": "Next.js Fundamentals",
    "description": "Build fullstack React apps with Next.js: routing, rendering, and project structure",
    "icon": "Zap",
    "requiredXp": 3000,
    "color": "from-gray-800 to-black",
    "courseId": "nextjs"
  },
  "lessons": [
    {
      "id": "nextjs-intro",
      "moduleId": "nextjs-fundamentals",
      "title": "What is Next.js?",
      "order": 1,
      "difficulty": "beginner",
      "content": "# Essential to know\n- Next.js = React framework for production\n- File-based routing (no react-router needed)\n- Server-side rendering (SSR) and static generation (SSG)\n- API routes built-in (fullstack in one codebase)\n- App Router (new) vs Pages Router (legacy)\n\n---\n\n# Next.js: The React Framework\n\n## Why Next.js?\n\nReact alone is great for UI, but you need more for production apps:\n\n**React limitations:**\n- No built-in routing\n- Client-side only (SEO issues)\n- No backend/API capabilities\n- Manual configuration for build tools\n\n**Next.js solves this:**\n- File-based routing\n- Server-side rendering for SEO\n- Built-in API routes\n- Automatic code splitting\n- Image optimization\n- Zero config (works out of the box)\n\n## Key Features\n\n### 1. File-Based Routing\n```\napp/\n├── page.js        → /\n├── about/\n│   └── page.js    → /about\n└── blog/\n    └── page.js    → /blog\n```\n\nCreate a file → Get a route automatically!\n\n### 2. Multiple Rendering Strategies\n\n**Static Generation (SSG):**\n- Build time rendering\n- Fastest (cached CDN)\n- Great for blogs, marketing pages\n\n**Server-Side Rendering (SSR):**\n- Render on each request\n- Always fresh data\n- Great for dashboards, user-specific content\n\n**Client-Side Rendering (CSR):**\n- Traditional React rendering\n- Use 'use client' directive\n- Great for interactive components\n\n### 3. Built-in Backend\n\nAPI routes in the same project:\n```javascript\n// app/api/users/route.js\nexport async function GET() {\n  const users = await db.getUsers();\n  return Response.json(users);\n}\n```\n\n## App Router vs Pages Router\n\n**App Router (Recommended):**\n- Uses `app/` directory\n- Server Components by default\n- Better performance\n- Nested layouts\n- Streaming\n\n**Pages Router (Legacy):**\n- Uses `pages/` directory\n- Client Components only\n- Simpler migration from CRA\n\nWe'll focus on App Router - it's the future!",
      "codeExample": "// app/page.js - Home page (Server Component by default)\nexport default function Home() {\n  return (\n    <main>\n      <h1>Welcome to Next.js!</h1>\n      <p>This page is server-rendered by default.</p>\n    </main>\n  );\n}\n\n// app/about/page.js - About page\nexport default function About() {\n  return (\n    <main>\n      <h1>About Us</h1>\n      <p>Learn more about our company.</p>\n    </main>\n  );\n}\n\n// app/layout.js - Root layout (wraps all pages)\nexport default function RootLayout({ children }) {\n  return (\n    <html lang=\"en\">\n      <body>\n        <nav>\n          <a href=\"/\">Home</a>\n          <a href=\"/about\">About</a>\n        </nav>\n        {children}\n      </body>\n    </html>\n  );\n}"
    },
    {
      "id": "nextjs-routing",
      "moduleId": "nextjs-fundamentals",
      "title": "File-Based Routing",
      "order": 2,
      "difficulty": "beginner",
      "content": "# Essential to know\n- Folders = URL segments\n- page.js = page component\n- layout.js = shared UI wrapper\n- Dynamic routes with [slug] folders\n- Link component for client-side navigation\n\n---\n\n# File-Based Routing in Next.js\n\n## Basic Routing\n\n**Folder structure → URL mapping:**\n```\napp/\n├── page.js              → /\n├── about/\n│   └── page.js          → /about\n├── blog/\n│   └── page.js          → /blog\n└── contact/\n    └── page.js          → /contact\n```\n\n**Rules:**\n- Folders define URL structure\n- `page.js` makes a route publicly accessible\n- Files without `page.js` are NOT routes (like `layout.js`, `loading.js`)\n\n## Layouts\n\nLayouts wrap pages and persist across navigation:\n\n```javascript\n// app/layout.js - Root layout\nexport default function RootLayout({ children }) {\n  return (\n    <html>\n      <body>\n        <header>My Site</header>\n        {children}  {/* Page content goes here */}\n        <footer>© 2024</footer>\n      </body>\n    </html>\n  );\n}\n```\n\n**Nested layouts:**\n```\napp/\n├── layout.js          ← Root layout (applies to all)\n├── page.js\n└── dashboard/\n    ├── layout.js      ← Dashboard layout (only for /dashboard/*)\n    └── page.js\n```\n\n## Dynamic Routes\n\nUse brackets `[ ]` for dynamic segments:\n\n```\napp/\n└── blog/\n    └── [slug]/\n        └── page.js    → /blog/hello-world, /blog/my-post\n```\n\n```javascript\n// app/blog/[slug]/page.js\nexport default function BlogPost({ params }) {\n  // params.slug = 'hello-world' or 'my-post'\n  return (\n    <article>\n      <h1>Post: {params.slug}</h1>\n    </article>\n  );\n}\n```\n\n## Client-Side Navigation\n\nUse `Link` component instead of `<a>` for SPA navigation:\n\n```javascript\nimport Link from 'next/link';\n\nexport default function Navigation() {\n  return (\n    <nav>\n      <Link href=\"/\">Home</Link>\n      <Link href=\"/about\">About</Link>\n      <Link href=\"/blog/hello-world\">Blog Post</Link>\n    </nav>\n  );\n}\n```\n\n**Benefits of Link:**\n- Prefetching on hover\n- Client-side navigation (no full page reload)\n- Maintains scroll position\n\n## Special Files\n\n- `page.js` - Page UI\n- `layout.js` - Shared UI wrapper\n- `loading.js` - Loading UI (shown while page loads)\n- `error.js` - Error UI (shown when errors occur)\n- `not-found.js` - 404 page",
      "codeExample": "// app/blog/[slug]/page.js\nexport default function BlogPost({ params }) {\n  return (\n    <article>\n      <h1>{params.slug}</h1>\n      <p>This is a blog post with slug: {params.slug}</p>\n    </article>\n  );\n}\n\n// Generate static params for dynamic routes\nexport async function generateStaticParams() {\n  const posts = await fetchPosts();\n  \n  return posts.map((post) => ({\n    slug: post.slug,\n  }));\n}\n\n// app/blog/layout.js - Blog section layout\nexport default function BlogLayout({ children }) {\n  return (\n    <div className=\"blog-layout\">\n      <aside>\n        <h3>Recent Posts</h3>\n        {/* Sidebar content */}\n      </aside>\n      <main>{children}</main>\n    </div>\n  );\n}\n\n// app/not-found.js\nexport default function NotFound() {\n  return (\n    <div>\n      <h2>404 - Page Not Found</h2>\n      <p>The page you're looking for doesn't exist.</p>\n    </div>\n  );\n}"
    },
    {
      "id": "nextjs-rendering",
      "moduleId": "nextjs-fundamentals",
      "title": "Server vs Client Components",
      "order": 3,
      "difficulty": "intermediate",
      "content": "# Essential to know\n- Server Components = render on server, zero JS sent to client\n- Client Components = render on client, need 'use client'\n- Server Components can fetch data directly\n- Client Components for interactivity (useState, useEffect, events)\n- Mix both for optimal performance\n\n---\n\n# Server vs Client Components\n\n## Server Components (Default)\n\n**Benefits:**\n- Zero JavaScript bundle size\n- Direct access to backend resources (DB, file system)\n- Better SEO (HTML sent to browser)\n- Faster initial page load\n\n**Limitations:**\n- Can't use browser APIs\n- Can't use React hooks (useState, useEffect)\n- Can't handle user interactions (onClick)\n\n```javascript\n// app/page.js - Server Component (default)\nasync function getData() {\n  const res = await fetch('https://api.example.com/posts');\n  return res.json();\n}\n\nexport default async function Page() {\n  const posts = await getData();  // ✅ Works on server\n  \n  return (\n    <main>\n      <h1>Posts</h1>\n      {posts.map(post => (\n        <article key={post.id}>\n          <h2>{post.title}</h2>\n        </article>\n      ))}\n    </main>\n  );\n}\n```\n\n## Client Components\n\nUse `'use client'` directive:\n\n```javascript\n'use client';\n\nimport { useState } from 'react';\n\nexport default function Counter() {\n  const [count, setCount] = useState(0);\n  \n  return (\n    <button onClick={() => setCount(count + 1)}>\n      Count: {count}\n    </button>\n  );\n}\n```\n\n**Use Client Components for:**\n- Interactive UI (buttons, forms)\n- Browser APIs (localStorage, geolocation)\n- React hooks (useState, useEffect, useContext)\n- Event handlers (onClick, onSubmit)\n\n## Mixing Server and Client\n\n**Pattern: Server page + Client components:**\n\n```javascript\n// app/page.js - Server Component\nimport Counter from './Counter';\n\nexport default async function Page() {\n  const data = await fetchData();  // Server-side fetch\n  \n  return (\n    <main>\n      <h1>{data.title}</h1>\n      <Counter />  {/* Client component for interactivity */}\n    </main>\n  );\n}\n\n// app/Counter.js - Client Component\n'use client';\n\nexport default function Counter() {\n  const [count, setCount] = useState(0);\n  return <button onClick={() => setCount(c => c + 1)}>{count}</button>;\n}\n```\n\n## When to Use Each\n\n**Server Component (default):**\n- Static content\n- Data fetching\n- Access to backend resources\n- SEO-sensitive pages\n\n**Client Component:**\n- User interactions\n- Browser-only APIs\n- React hooks\n- Third-party libraries that need browser\n\n## Best Practice\n\nKeep Client Components as small as possible:\n\n```javascript\n// ❌ Bad: Whole page is client\n'use client';\nexport default function Page() { /* ... */ }\n\n// ✅ Good: Only interactive parts are client\nexport default function Page() {  // Server\n  return (\n    <main>\n      <h1>Static content</h1>\n      <InteractiveWidget />  {/* Client */}\n    </main>\n  );\n}\n```",
      "codeExample": "// app/products/page.js - Server Component\nasync function getProducts() {\n  const res = await fetch('https://fakestoreapi.com/products');\n  return res.json();\n}\n\nexport default async function ProductsPage() {\n  const products = await getProducts();\n  \n  return (\n    <div>\n      <h1>Products</h1>\n      <div className=\"grid\">\n        {products.map(product => (\n          <ProductCard key={product.id} product={product} />\n        ))}\n      </div>\n    </div>\n  );\n}\n\n// app/components/AddToCart.js - Client Component\n'use client';\n\nimport { useState } from 'react';\n\nexport default function AddToCart({ productId }) {\n  const [added, setAdded] = useState(false);\n  \n  const handleAdd = () => {\n    // Add to cart logic\n    setAdded(true);\n    setTimeout(() => setAdded(false), 2000);\n  };\n  \n  return (\n    <button onClick={handleAdd}>\n      {added ? '✓ Added!' : 'Add to Cart'}\n    </button>\n  );\n}\n\n// app/components/ProductCard.js - Server Component\nimport AddToCart from './AddToCart';\n\nexport default function ProductCard({ product }) {\n  return (\n    <div className=\"card\">\n      <img src={product.image} alt={product.title} />\n      <h3>{product.title}</h3>\n      <p>${product.price}</p>\n      <AddToCart productId={product.id} />\n    </div>\n  );\n}"
    },
    {
      "id": "nextjs-images-assets",
      "moduleId": "nextjs-fundamentals",
      "title": "Images and Static Assets",
      "order": 4,
      "difficulty": "beginner",
      "content": "# Essential to know\n- Use next/image for automatic optimization\n- Images in /public folder are served at root URL\n- next/image handles lazy loading, resizing, and formats\n- Fonts optimized with next/font\n- CSS modules and global styles supported\n\n---\n\n# Images and Assets in Next.js\n\n## The Image Component\n\nNext.js provides an optimized Image component:\n\n```javascript\nimport Image from 'next/image';\n\nexport default function Page() {\n  return (\n    <Image\n      src=\"/photo.jpg\"        // Path to image\n      alt=\"Description\"       // Required for accessibility\n      width={500}               // Required\n      height={300}              // Required\n      priority                  // Load immediately (above fold)\n    />\n  );\n}\n```\n\n**Benefits:**\n- Automatic format optimization (WebP, AVIF)\n- Responsive sizing\n- Lazy loading (images load as they enter viewport)\n- Prevents layout shift (CLS)\n\n## Static Assets\n\nPlace files in `/public` folder:\n\n```\npublic/\n├── images/\n│   └── logo.png\n├── favicon.ico\n└── robots.txt\n```\n\nAccess at root URL:\n```\n/public/images/logo.png → https://yoursite.com/images/logo.png\n```\n\n## External Images\n\nFor external URLs, configure next.config.js:\n\n```javascript\n// next.config.js\nmodule.exports = {\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'cdn.example.com',\n      },\n    ],\n  },\n};\n```\n\nThen use:\n```javascript\n<Image\n  src=\"https://cdn.example.com/photo.jpg\"\n  alt=\"Photo\"\n  width={500}\n  height={300}\n/>\n```\n\n## Font Optimization\n\nUse next/font for optimal font loading:\n\n```javascript\n// app/layout.js\nimport { Inter } from 'next/font/google';\n\nconst inter = Inter({ subsets: ['latin'] });\n\nexport default function RootLayout({ children }) {\n  return (\n    <html lang=\"en\">\n      <body className={inter.className}>\n        {children}\n      </body>\n    </html>\n  );\n}\n```\n\n**Benefits:**\n- Zero layout shift\n- No external requests (fonts self-hosted)\n- Automatic optimization",
      "codeExample": "// app/page.js\nimport Image from 'next/image';\n\nexport default function Gallery() {\n  return (\n    <div>\n      <h1>Photo Gallery</h1>\n      \n      {/* Local image from /public */}\n      <Image\n        src=\"/images/hero.jpg\"\n        alt=\"Hero image\"\n        width={800}\n        height={400}\n        priority  // Load immediately\n      />\n      \n      {/* External image (requires config) */}\n      <Image\n        src=\"https://example.com/photo.jpg\"\n        alt=\"External photo\"\n        width={400}\n        height={300}\n      />\n      \n      {/* Fill parent container */}\n      <div style={{ position: 'relative', width: '100%', height: '300px' }}>\n        <Image\n          src=\"/images/banner.jpg\"\n          alt=\"Banner\"\n          fill  // Fills parent container\n          style={{ objectFit: 'cover' }}\n        />\n      </div>\n    </div>\n  );\n}\n\n// next.config.js\nmodule.exports = {\n  images: {\n    remotePatterns: [\n      {\n        protocol: 'https',\n        hostname: 'example.com',\n      },\n    ],\n  },\n};"
    }
  ],
  "exercises": [
    {
      "id": "nextjs-ex-1",
      "lessonId": "nextjs-intro",
      "moduleId": "nextjs-fundamentals",
      "title": "Create Your First Next.js Page",
      "difficulty": "easy",
      "description": "Create a simple about page in Next.js",
      "instructions": "Create an About page at app/about/page.js that displays:\n1. An h1 with 'About Us'\n2. A paragraph with 'Welcome to our Next.js application'\n\nThe page should be a Server Component (default).",
      "starterCode": "// app/about/page.js\n",
      "solution": "// app/about/page.js\nexport default function About() {\n  return (\n    <main>\n      <h1>About Us</h1>\n      <p>Welcome to our Next.js application</p>\n    </main>\n  );\n}",
      "hints": ["Export a default function component", "Return JSX with h1 and p elements"],
      "validationPrompt": "Check if the code creates an About component that returns an h1 'About Us' and a paragraph with welcome text"
    },
    {
      "id": "nextjs-ex-2",
      "lessonId": "nextjs-routing",
      "moduleId": "nextjs-fundamentals",
      "title": "Dynamic Route Parameter",
      "difficulty": "medium",
      "description": "Create a dynamic route that uses URL parameters",
      "instructions": "Create a blog post page at app/blog/[slug]/page.js that:\n1. Accepts params with a slug property\n2. Displays an h1 with the slug value\n3. Shows a paragraph with 'Reading: {slug}'",
      "starterCode": "// app/blog/[slug]/page.js\n",
      "solution": "// app/blog/[slug]/page.js\nexport default function BlogPost({ params }) {\n  return (\n    <main>\n      <h1>{params.slug}</h1>\n      <p>Reading: {params.slug}</p>\n    </main>\n  );\n}",
      "hints": ["Use destructuring to get params from props", "Access params.slug to get the dynamic value"],
      "validationPrompt": "Check if the BlogPost component uses params.slug to display the blog post title"
    },
    {
      "id": "nextjs-ex-3",
      "lessonId": "nextjs-rendering",
      "moduleId": "nextjs-fundamentals",
      "title": "Client Component Counter",
      "difficulty": "medium",
      "description": "Create an interactive counter as a Client Component",
      "instructions": "Create a Counter component that:\n1. Has 'use client' at the top\n2. Uses useState to track count starting at 0\n3. Has a button that increments count when clicked\n4. Displays 'Count: {count}'",
      "starterCode": "\n",
      "solution": "'use client';\n\nimport { useState } from 'react';\n\nexport default function Counter() {\n  const [count, setCount] = useState(0);\n  \n  return (\n    <button onClick={() => setCount(count + 1)}>\n      Count: {count}\n    </button>\n  );\n}",
      "hints": ["Add 'use client' directive", "Import useState from React", "Use onClick handler to update state"],
      "validationPrompt": "Check if the component has 'use client', uses useState with count starting at 0, and increments on button click"
    }
  ]
}