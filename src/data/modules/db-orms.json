{"module":{"id":"db-orms","title":"ORMs: Prisma and Drizzle","description":"Using ORMs to simplify data access: Prisma and Drizzle with Node.js","icon":"Layers","requiredXp":1000,"color":"from-violet-500 to-purple-600","courseId":"databases"},"lessons":[{"id":"orms-why","moduleId":"db-orms","title":"Why use an ORM?","order":1,"difficulty":"intermediate","content":"# Essential to know\\n- ORM = Object-Relational Mapping: code ↔ database\\n- Avoid writing repetitive SQL\\n- Type-safe with TypeScript\\n- Automatic migrations\\n- Trade-off: abstraction vs performance/control\\n\\n---\\n\\n# ORM vs Raw SQL\\n\\n## Writing SQL everywhere\\n```javascript\\n// ❌ Verbose, repetitive, not type-safe\\nconst result = await pool.query(\\n  'SELECT * FROM users WHERE id = $1',\\n  [id]\\n);\\nconst user = result.rows[0];\\n\\n// Manual validation\\nif (!user) throw new Error('User not found');\\n```\\n\\n## With an ORM\\n```javascript\\n// ✅ Concise, type-safe, automatic relations\\nconst user = await prisma.user.findUnique({\\n  where: { id },\\n  include: { posts: true }\\n});\\n```\\n\\n## Why an ORM?\\n\\n### ✅ Advantages\\n- **Productivity**: Less boilerplate code\\n- **Type-safe**: Autocompletion and compile-time checking\\n- **Relations**: Automatic JOIN management\\n- **Migrations**: DB schema versioning\\n- **Multi-database**: Change DB without changing code (theoretically)\\n- **Security**: Automatic parameterized queries\\n\\n### ❌ Disadvantages\\n- **Overhead**: Sometimes generates suboptimal queries\\n- **Learning curve**: New syntax and concepts\\n- **Debugging**: Harder to optimize queries\\n- **Complex queries**: Complex queries sometimes verbose\\n- **Lock-in**: Difficult migration if you want to change ORM\\n\\n## When to use an ORM?\\n\\n✅ **Use an ORM if:**\\n- You want complete type-safety\\n- Your team prefers pure JavaScript/TypeScript\\n- Moderate relational schema (not 50 complex tables)\\n- Project with lots of CRUD\\n\\n❌ **Raw SQL if:**\\n- Very complex queries (analytics, reporting)\\n- Need complete control over queries\\n- Critical performance (benchmarking needed)\\n- Experienced SQL team\\n\\n## Modern ORMs (2024)\\n\\n| ORM | Approach | Strengths | Weaknesses |\\n|-----|----------|-----------|------------|\\n..."},{"id":"prisma-intro","moduleId":"db-orms","title":"Prisma: Setup and Schema","order":2,"difficulty":"intermediate","content":"# Essential to know\\n- Prisma = Schema-first ORM with excellent DX\\n- Prisma Client for queries\\n- Prisma Migrate for migrations\\n- Prisma Studio to visualize data\\n- Supports PostgreSQL, MySQL, SQLite, SQL Server, MongoDB\\n\\n---\\n\\n# Prisma in practice\\n\\n## Installation\\n\\n```bash\\n# Initialize Prisma\\nnpm install prisma --save-dev\\nnpm install @prisma/client\\n\\n# Initialize project\\nnpx prisma init\\n\\n# Generates:\\n# - prisma/schema.prisma\\n# - .env with DATABASE_URL\\n```\\n\\n## Configuration\\n\\n```prisma\\n// schema.prisma\\ngenerator client {\\n  provider = \\\"prisma-client-js\\\"\\n}\\n\\ndatasource db {\\n  provider = \\\"postgresql\\\"  // or \\\"sqlite\\\", \\\"mysql\\\"\\n  url      = env(\\\"DATABASE_URL\\\")\\n}\\n\\n// Models\\nmodel User {\\n  id        Int      @id @default(autoincrement())\\n  email     String   @unique\\n  name      String?\\n  posts     Post[]\\n  profile   Profile?\\n  createdAt DateTime @default(now())\\n  updatedAt DateTime @updatedAt\\n}\\n\\nmodel Post {\\n  id       Int     @id @default(autoincrement())\\n  title    String\\n  content  String?\\n  published Boolean @default(false)\\n  author   User    @relation(fields: [authorId], references: [id])\\n  authorId Int\\n  tags     Tag[]\\n}\\n\\nmodel Profile {\\n  id     Int    @id @default(autoincrement())\\n  bio    String?\\n  user   User   @relation(fields: [userId], references: [id])\\n  userId Int    @unique\\n}\\n\\nmodel Tag {\\n  id    Int    @id @default(autoincrement())\\n  name  String @unique\\n  posts Post[]\\n}\\n```\\n\\n## Migrations\\n\\n```bash\\n# Create and apply migration\\nnpx prisma migrate dev --name init\\n\\n# View generated SQL without applying\\nnpx prisma migrate dev --create-only\\n\\n# Deploy to production (without interactive)\\nnpx prisma migrate deploy\\n\\n# Reset (warning: data loss!)\\nnpx prisma migrate reset\\n```\\n\\n## Prisma Client\\n\\n```javascript\\nimport { PrismaClient } from '@prisma/client';\\n\\nconst prisma = new PrismaClient({\\n  log: ['query', 'info', '..."},{"id":"drizzle-intro","moduleId":"db-orms","title":"Drizzle: SQL-like TypeScript","order":3,"difficulty":"intermediate","content":"# Essential to know\\n- Drizzle = ORM that looks like SQL\\n- Lightweight, performant, type-safe\\n- No complex runtime\\n- Query builder close to SQL\\n- Modern alternative to Prisma\\n\\n---\\n\\n# Drizzle in practice\\n\\n## Installation\\n\\n```bash\\nnpm install drizzle-orm pg\\nnpm install -D drizzle-kit\\n```\\n\\n## Configuration\\n\\n```typescript\\n// db/schema.ts\\nimport { pgTable, serial, varchar, text, timestamp, integer, boolean } from 'drizzle-orm/pg-core';\\nimport { relations } from 'drizzle-orm';\\n\\n// Tables\\nexport const users = pgTable('users', {\\n  id: serial('id').primaryKey(),\\n  email: varchar('email', { length: 255 }).notNull().unique(),\\n  name: varchar('name', { length: 255 }),\\n  createdAt: timestamp('created_at').defaultNow(),\\n  updatedAt: timestamp('updated_at').defaultNow()\\n});\\n\\nexport const posts = pgTable('posts', {\\n  id: serial('id').primaryKey(),\\n  title: varchar('title', { length: 255 }).notNull(),\\n  content: text('content'),\\n  published: boolean('published').default(false),\\n  authorId: integer('author_id').references(() => users.id),\\n  createdAt: timestamp('created_at').defaultNow()\\n});\\n\\n// Relations\\nexport const usersRelations = relations(users, ({ many }) => ({\\n  posts: many(posts)\\n}));\\n\\nexport const postsRelations = relations(posts, ({ one }) => ({\\n  author: one(users, {\\n    fields: [posts.authorId],\\n    references: [users.id]\\n  })\\n}));\\n```\\n\\n## Drizzle Config\\n\\n```typescript\\n// drizzle.config.ts\\nimport type { Config } from 'drizzle-kit';\\n\\nexport default {\\n  schema: './db/schema.ts',\\n  out: './drizzle',\\n  driver: 'pg',\\n  dbCredentials: {\\n    connectionString: process.env.DATABASE_URL!\\n  }\\n} satisfies Config;\\n```\\n\\n## Migrations\\n\\n```bash\\n# Generate migrations\\nnpx drizzle-kit generate:pg\\n\\n# Apply\\nnpx drizzle-kit push:pg\\n```\\n\\n## Drizzle Client\\n\\n```typescript\\n// db/index.ts\\nimport { Pool } from 'pg';\\nimport { drizzle } from 'drizzle-orm/node-postgres';\\nimport * as schem..."}],"exercises":[]}
