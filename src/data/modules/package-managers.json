{
  "module": {
    "id": "package-managers",
    "title": "Package Managers : npm, yarn, pnpm",
    "description": "Understand and use Node.js package managers",
    "icon": "Package",
    "requiredXp": 200,
    "color": "from-red-500 to-pink-600",
    "courseId": "internet-tools"
  },
  "lessons": [
    {
      "id": "package-managers-intro",
      "moduleId": "package-managers",
      "title": "Why Package Managers?",
      "order": 1,
      "difficulty": "beginner",
      "content": "# Essential to know\n\n- Package managers solve the dependency problem\n- node_modules contains all installed packages\n- Without them, you'd manually download and manage libraries\n- They handle versioning, updates, and compatibility\n\n---\n\n# Why Package Managers?\n\n## The Problem\n\nImagine building a web app without package managers:\n\n1. You need React - go to reactjs.org, download the files\n2. You need Lodash - go to lodash.com, download the files\n3. You need Axios - go to axios-http.com, download the files\n4. Each library has its own dependencies - track those manually too\n5. Updates? Check each site individually\n6. Conflicts? Good luck!\n\n**It would be a nightmare.**\n\n## The Solution\n\nPackage managers automate all of this:\n\n```bash\n# One command installs everything\nnpm install react lodash axios\n\n# One command updates everything\nnpm update\n\n# All dependencies tracked in package.json\n```\n\n## What They Do\n\n1. **Install packages** from a registry (npm registry)\n2. **Manage versions** with semantic versioning\n3. **Handle dependencies** automatically\n4. **Lock versions** for consistency across environments\n5. **Run scripts** defined in package.json\n\n## The node_modules Folder\n\nWhen you install packages, they go into `node_modules/`:\n\n```\nmy-project/\n├── node_modules/\n│   ├── react/\n│   ├── lodash/\n│   └── axios/\n│       └── node_modules/  # Dependencies of dependencies!\n├── package.json\n└── package-lock.json\n```\n\n**Warning:** node_modules can be huge! It's normal to see 100MB+ for a React app.\n\n## Why Not Just CDN?\n\nCDN (Content Delivery Network) links work for simple pages:\n\n```html\n<script src=\"https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js\"></script>\n```\n\nBut for real applications:\n- **Bundling:** Package managers work with build tools to create optimized bundles\n- **Tree shaking:** Remove unused code\n- **TypeScript:** Get type definitions\n- **Development:** Access to dev tools and hot reload\n- **Offline work:** No internet required after install",
      "codeExample": "// package.json - the heart of your project\n{\n  \"name\": \"my-awesome-app\",\n  \"version\": \"1.0.0\",\n  \"description\": \"A great web application\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"start\": \"node index.js\",\n    \"test\": \"jest\"\n  },\n  \"dependencies\": {\n    \"react\": \"^18.2.0\"\n  },\n  \"devDependencies\": {\n    \"jest\": \"^29.0.0\"\n  }\n}\n\n// Common commands\nnpm init -y          // Initialize new project\nnpm install react    // Add dependency\nnpm install -D jest  // Add dev dependency\nnpm update           // Update all packages"
    },
    {
      "id": "package-json-deep-dive",
      "moduleId": "package-managers",
      "title": "package.json Deep Dive",
      "order": 2,
      "difficulty": "beginner",
      "content": "# Essential to know\n\n- package.json is your project's manifest and configuration\n- name and version are required fields\n- scripts section defines runnable commands\n- dependencies are required for production\n- devDependencies are only for development\n- peerDependencies specify compatibility requirements\n\n---\n\n# package.json Deep Dive\n\n## Required Fields\n\nEvery package.json needs at least:\n\n```json\n{\n  \"name\": \"my-project\",\n  \"version\": \"1.0.0\"\n}\n```\n\n**name rules:**\n- Must be lowercase\n- Can contain hyphens and underscores\n- No spaces or special characters\n- Should be unique if publishing to NPM\n\n**version format:** Semantic versioning (semver)\n- MAJOR.MINOR.PATCH (e.g., 2.1.3)\n- MAJOR: Breaking changes\n- MINOR: New features (backward compatible)\n- PATCH: Bug fixes\n\n## The Scripts Section\n\nDefine commands you can run with `npm run <script>`:\n\n```json\n{\n  \"scripts\": {\n    \"start\": \"node server.js\",\n    \"dev\": \"nodemon server.js\",\n    \"build\": \"webpack --mode=production\",\n    \"test\": \"jest\",\n    \"test:watch\": \"jest --watch\",\n    \"lint\": \"eslint src/\",\n    \"format\": \"prettier --write \\\"src/**/*.{js,jsx}\\\"\"\n  }\n}\n```\n\n**Special scripts** (don't need `run`):\n- `npm start` (runs start script)\n- `npm test` (runs test script)\n\nAll others need `npm run`:\n- `npm run dev`\n- `npm run build`\n\n## Dependencies vs devDependencies\n\n**dependencies** - Required to run your app:\n```json\n{\n  \"dependencies\": {\n    \"react\": \"^18.2.0\",\n    \"react-dom\": \"^18.2.0\",\n    \"axios\": \"^1.4.0\"\n  }\n}\n```\n\nInstall with: `npm install react`\n\n**devDependencies** - Only needed for development:\n```json\n{\n  \"devDependencies\": {\n    \"jest\": \"^29.0.0\",\n    \"eslint\": \"^8.0.0\",\n    \"@types/react\": \"^18.2.0\"\n  }\n}\n```\n\nInstall with: `npm install --save-dev jest` or `npm i -D jest`\n\n**peerDependencies** - Expected to be provided by the consuming project:\n```json\n{\n  \"peerDependencies\": {\n    \"react\": \">=16.8.0\"\n  }\n}\n```\n\nUsed mainly for libraries/plugins that work with a specific framework version.",
      "codeExample": "// Example package.json for a React component library\n{\n  \"name\": \"@mycompany/ui-kit\",\n  \"version\": \"2.1.0\",\n  \"description\": \"Reusable React components\",\n  \"main\": \"dist/index.js\",\n  \"module\": \"dist/index.esm.js\",\n  \"types\": \"dist/index.d.ts\",\n  \"files\": [\"dist\"],\n  \"scripts\": {\n    \"build\": \"rollup -c\",\n    \"test\": \"jest\",\n    \"prepublishOnly\": \"npm run build\"\n  },\n  \"peerDependencies\": {\n    \"react\": \">=16.8.0\",\n    \"react-dom\": \">=16.8.0\"\n  },\n  \"devDependencies\": {\n    \"@types/react\": \"^18.2.0\",\n    \"jest\": \"^29.0.0\",\n    \"rollup\": \"^3.0.0\"\n  }\n}\n\n// Common script patterns\n{\n  \"scripts\": {\n    \"start\": \"react-scripts start\",\n    \"build\": \"react-scripts build\",\n    \"test\": \"react-scripts test\",\n    \"eject\": \"react-scripts eject\",\n    \"lint\": \"eslint src/**/*.{js,jsx}\",\n    \"lint:fix\": \"eslint src/**/*.{js,jsx} --fix\",\n    \"format\": \"prettier ---write \\\"src/**/*.{js,jsx,json,css}\\\"\"\n  }\n}"
    },
    {
      "id": "npm-yarn-pnpm",
      "moduleId": "package-managers",
      "title": "npm vs yarn vs pnpm",
      "order": 3,
      "difficulty": "intermediate",
      "content": "# Essential to know\n\n- npm is the default, included with Node.js\n- yarn was created by Facebook to fix npm's performance issues\n- pnpm is the fastest and most disk-space efficient\n- Lock files ensure consistent installations across environments\n- Choose based on your team's needs and preferences\n\n---\n\n# npm vs yarn vs pnpm\n\n## The Three Main Package Managers\n\n### npm (Node Package Manager)\n\n**The default choice** - comes with Node.js\n\n```bash\n# Included when you install Node.js\nnode -v  # Check Node version\nnpm -v   # Check npm version\n```\n\n**Pros:**\n- ✅ Comes with Node.js (no extra install)\n- ✅ Largest ecosystem and community\n- ✅ Most documentation and tutorials\n- ✅ Built-in workspaces (monorepo support)\n\n**Cons:**\n- ❌ Slower than yarn and pnpm\n- ❌ node_modules can be huge (duplicate dependencies)\n- ❌ Historically had security issues (mostly fixed now)\n\n**Best for:** Most projects, especially if you're just starting\n\n### yarn (Yet Another Resource Navigator)\n\n**Created by Facebook** in 2016 to solve npm's speed and reliability issues\n\n```bash\n# Install yarn globally\nnpm install -g yarn\n\n# Or use corepack (comes with Node 16.13+)\ncorepack enable\n```\n\n**Pros:**\n- ✅ Faster than npm (parallel downloads)\n- ✅ Better lock file (yarn.lock)\n- ✅ Workspace support (great for monorepos)\n- ✅ PnP (Plug'n'Play) - doesn't use node_modules\n\n**Cons:**\n- ❌ Another tool to install and learn\n- ❌ PnP can break some older packages\n\n**Best for:** Large projects, monorepos, when you need deterministic installs\n\n### pnpm (Performant NPM)\n\n**The modern, efficient choice**\n\n```bash\n# Install pnpm\nnpm install -g pnpm\n\n# Or use corepack\ncorepack enable\ncorepack prepare pnpm@latest --activate\n```\n\n**Pros:**\n- ✅ **Fastest** - parallel operations, efficient caching\n- ✅ **Most disk space efficient** - uses content-addressable store\n- ✅ **Strict dependency resolution** - prevents phantom dependencies\n- ✅ Native monorepo support\n\n**Cons:**\n- ❌ Less widely adopted\n- ❌ Some older tools may not work\n\n**Best for:** Performance-critical projects, monorepos, when disk space matters",
      "codeExample": "// Performance comparison (approximate)\n// Installing React + dependencies:\n\n// npm: ~30 seconds\n// yarn: ~20 seconds  \n// pnpm: ~10 seconds (after first install, even faster due to caching)\n\n// Disk space usage:\n// npm: ~200MB node_modules\n// yarn: ~200MB node_modules (or 0 with PnP)\n// pnpm: ~50MB (shares packages across projects)\n\n# Using corepack (Node 16.13+) to manage package managers\n# Enable corepack\ncorepack enable\n\n# Prepare specific versions\ncorepack prepare npm@9.0.0 --activate\ncorepack prepare yarn@3.0.0 --activate\ncorepack prepare pnpm@8.0.0 --activate\n\n# Check which version is active\nnpm -v\nyarn -v\npnpm -v"
    },
    {
      "id": "npm-commands-troubleshooting",
      "moduleId": "package-managers",
      "title": "Common Commands & Troubleshooting",
      "order": 4,
      "difficulty": "intermediate",
      "content": "# Essential to know\n\n- npm install adds packages from the registry\n- npm update upgrades packages to latest compatible versions\n- npm audit checks for security vulnerabilities\n- npm cache clean fixes mysterious installation issues\n- Delete node_modules and lock file when nothing else works\n\n---\n\n# Common NPM Commands\n\n## Installing Packages\n\n```bash\n# Install all dependencies from package.json\nnpm install\n# or shorthand\nnpm i\n\n# Install a specific package (adds to dependencies)\nnpm install react\nnpm i react\n\n# Install as dev dependency\nnpm install --save-dev jest\nnpm i -D jest\n\n# Install globally (CLI tools)\nnpm install -g typescript\nnpm i -g @angular/cli\n\n# Install specific version\nnpm install react@18.0.0\n\n# Install latest version (ignoring semver)\nnpm install react@latest\n```\n\n## Updating Packages\n\n```bash\n# Update all packages to latest compatible version (respects ^ and ~)\nnpm update\nnpm up\n\n# Update a specific package\nnpm update react\n\n# Check outdated packages (dry run)\nnpm outdated\n\n# Upgrade to major versions (dangerous!)\nnpm install react@latest  # Or edit package.json manually\n```\n\n## Running Scripts\n\n```bash\n# Run start script (npm start)\nnpm start\n\n# Run test script (npm test)\nnpm test\n\n# Run any other script (needs 'run')\nnpm run build\nnpm run dev\nnpm run lint\n```\n\n## Inspecting Packages\n\n```bash\n# View package info\nnpm view react\nnpm view react versions  # All available versions\nnpm view react dependencies\n\n# List installed packages\nnpm list\nnpm list --depth=0  # Only top-level packages\nnpm list react  # Find where react is installed\n\n# Check why a package is installed\nnpm ls axios\n```\n\n## Security & Maintenance\n\n```bash\n# Audit for security vulnerabilities\nnpm audit\n\n# Fix vulnerabilities automatically\nnpm audit fix\n\n# Fix including breaking changes (major version updates)\nnpm audit fix --force  # Use with caution!\n\n# Clean npm cache\nnpm cache clean --force\n```\n\n# Troubleshooting\n\n## Problem: \"Cannot find module\"\n\n**Cause:** Package not installed or corrupted\n\n**Solutions:**\n```bash\n# 1. Install missing packages\nnpm install\n\n# 2. If that doesn't work, nuke everything\nrm -rf node_modules package-lock.json\nnpm install\n```\n\n## Problem: Permission Errors (EACCES)\n\n**Cause:** npm doesn't have permission to write to directories\n\n**Solutions:**\n```bash\n# NEVER use sudo with npm (security risk)\n\n# Instead, fix npm permissions:\nmkdir ~/.npm-global\nnpm config set prefix '~/.npm-global'\n# Add to ~/.bashrc or ~/.zshrc:\nexport PATH=~/.npm-global/bin:$PATH\n```\n\n## Problem: Installation Hangs or Times Out\n\n**Solutions:**\n```bash\n# Clear cache\nnpm cache clean --force\n\n# Use different registry (if npm is down)\nnpm config set registry https://registry.npmmirror.com\n\n# Back to official registry\nnpm config set registry https://registry.npmjs.org\n\n# Increase timeout\nnpm config set fetch-timeout 60000\n```\n\n## Problem: Native Module Build Fails\n\n**Cause:** Missing build tools (Python, C++ compiler)\n\n**Solutions:**\n```bash\n# macOS\nxcode-select --install\n\n# Windows\n# Install windows-build-tools or Visual Studio Build Tools\nnpm install --global windows-build-tools\n\n# Linux (Ubuntu/Debian)\nsudo apt-get install build-essential\n```\n\n## Problem: \"EBADENGINE\" - Unsupported Node Version\n\n**Cause:** Package requires different Node.js version\n\n**Solutions:**\n```bash\n# Check Node version\nnode -v\n\n# Use nvm to switch versions (recommended)\nnvm install 18\nnvm use 18\n\n# Or ignore engine check (not recommended for production)\nnpm install --force\n```\n\n## The Nuclear Option\n\nWhen nothing else works:\n\n```bash\n# 1. Delete everything\nrm -rf node_modules package-lock.json\n\n# 2. Clear cache\nnpm cache clean --force\n\n# 3. Reinstall\nnpm install\n\n# 4. If still broken, try different Node version\nnvm use 18\nnpm install\n```\n\n## Debugging Tips\n\n```bash\n# Verbose output (see what's happening)\nnpm install --verbose\n\n# Dry run (see what would happen)\nnpm install --dry-run\n\n# Check npm configuration\nnpm config list\nnpm config get registry\n\n# Check npm version\nnpm -v\nwhich npm\n```\n\n## Useful Aliases\n\nAdd to your `.bashrc` or `.zshrc`:\n\n```bash\n# Quick reinstall\nalias npm-fresh='rm -rf node_modules package-lock.json && npm install'\n\n# Quick update\nalias npm-up='npm update && npm audit fix'\n\n# Check outdated\nalias npm-old='npm outdated'\n```",
      "codeExample": "# Troubleshooting script\n#!/bin/bash\necho \"=== NPM Diagnostic ===\"\necho \"Node version: $(node -v)\"\necho \"NPM version: $(npm -v)\"\necho \"Registry: $(npm config get registry)\"\necho \"\"\necho \"=== Checking for common issues ===\"\n\n# Check for node_modules\nif [ -d \"node_modules\" ]; then\n  echo \"✓ node_modules exists\"\n  echo \"  Size: $(du -sh node_modules | cut -f1)\"\nelse\n  echo \"✗ node_modules missing - run: npm install\"\nfi\n\n# Check for lock file\nif [ -f \"package-lock.json\" ]; then\n  echo \"✓ package-lock.json exists\"\nelse\n  echo \"⚠ package-lock.json missing\"\nfi\n\n# Check for common errors\nif ! npm list >/dev/null 2>&1; then\n  echo \"⚠ npm list shows errors - possible missing dependencies\"\nfi\n\necho \"\"\necho \"=== Recommended fixes ===\"\necho \"If you have issues, try:\"\necho \"  1. rm -rf node_modules package-lock.json\"\necho \"  2. npm cache clean --force\"\necho \"  3. npm install\""
    }
  ],
  "exercises": []
}
