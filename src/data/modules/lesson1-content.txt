# Essential to know
- Authentication: Who are you? (identity)
- Authorization: What can you do? (permissions)
- Both are essential for secure applications
- Different strategies for different use cases

---

# Authentication vs Authorization

## Understanding the Difference

These two terms are often confused, but they serve different purposes:

### Authentication (AuthN)
**Answer: "Who are you?"**

Authentication is the process of verifying that a user is who they claim to be.

**Examples:**
- Entering your username and password
- Fingerprint scan
- Face recognition
- Security token
- SMS code

**Key characteristics:**
- Happens once per session (at login)
- Proves identity
- Creates a session or token

### Authorization (AuthZ)
**Answer: "What are you allowed to do?"**

Authorization determines what resources an authenticated user can access and what actions they can perform.

**Examples:**
- Admin can delete users, regular user cannot
- Premium subscribers see HD videos, free users see SD
- Team members can edit project, viewers can only read

**Key characteristics:**
- Happens on every request
- Checks permissions
- Uses roles, policies, or claims

## The Auth Flow

```
1. User provides credentials (email/password)
2. System AUTHENTICATES: "Is this really the user?"
3. System creates session/token
4. User requests resource
5. System AUTHORIZES: "Can this user access this?"
6. Access granted or denied
```

## Real-World Analogy

**Airport Security:**
- **Authentication:** Showing your passport (proving identity)
- **Authorization:** Your boarding pass (determining which gate/plane you can access)

**Office Building:**
- **Authentication:** Keycard scan (proving you work there)
- **Authorization:** Access levels (can you enter the server room or just the lobby?)

## Common Auth Strategies

### 1. Session-Based (Stateful)
```
Client <-> Server <-> Database
```
- Server stores session data
- Client gets session ID (cookie)
- **Good for:** Traditional web apps
- **Trade-off:** Server must track all sessions

### 2. Token-Based (Stateless)
```
Client <-> Server
(Token contains all info)
```
- JWT contains user info and permissions
- No server storage needed
- **Good for:** APIs, mobile apps, microservices
- **Trade-off:** Cannot revoke immediately

### 3. OAuth 2.0 / OpenID Connect
```
Your App <-> Google/GitHub <-> User
```
- Delegate authentication to trusted providers
- User logs in with Google, GitHub, etc.
- **Good for:** User convenience, reduced password fatigue
- **Trade-off:** Dependency on third parties

## When to Use What

### Choose Session-Based When:
- Building a traditional server-rendered web app
- Need to revoke sessions immediately
- Want simpler token management
- Using frameworks like Express with server-side rendering

### Choose JWT When:
- Building REST APIs
- Scaling horizontally (multiple servers)
- Mobile or SPA applications
- Microservices architecture

### Choose OAuth When:
- Want to offer "Login with Google"
- Don't want to manage passwords
- Building consumer-facing apps
- Quick onboarding is important

## Key Security Principles

1. **Never trust the client** - Always verify on server
2. **Use HTTPS** - Encrypt all auth traffic
3. **Hash passwords** - Never store plain text
4. **Validate everything** - Sanitize all input
5. **Principle of least privilege** - Give minimum permissions needed
6. **Defense in depth** - Multiple security layers

## Quick Reference

| | Authentication | Authorization |
|---|---|---|
| **Question** | Who are you? | What can you do? |
| **When** | Login | Every request |
| **Methods** | Passwords, tokens, biometrics | Roles, permissions, policies |
| **Examples** | Login form, OAuth, 2FA | Admin panel, resource access |
| **Stores** | Password hashes, sessions | Roles, ACLs, claims |

**Remember:** Authentication proves identity, authorization controls access. You need both for secure systems!