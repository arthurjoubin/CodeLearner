---
import MainLayout from '../../layouts/MainLayout.astro';
import { getCollection } from 'astro:content';
import ResourceTabs from '../../components/ResourceTabs.astro';

const tools = await getCollection('tools');
const toolsByCategory = tools.reduce((acc, tool) => {
	const cat = tool.data.category;
	if (!acc[cat]) acc[cat] = [];
	acc[cat].push(tool);
	return acc;
}, {} as Record<string, typeof tools>);

const categories = Object.keys(toolsByCategory).sort();
---

<MainLayout title="AI Tools">
	<div class="page-enter max-w-5xl mx-auto">
		<div class="mb-6">
			<a href="/resources" class="text-xs text-gray-500 hover:text-primary-600 uppercase font-bold flex items-center gap-1 mb-3">
				<span class="w-1.5 h-1.5 bg-primary-500 rounded-full" />
				Back to Resources
			</a>
			<div class="flex items-center justify-between">
				<div class="relative inline-block">
					<h1 class="text-xl font-black text-gray-900 uppercase">AI Tools</h1>
					<span class="absolute -bottom-0.5 left-0 w-12 h-0.5 bg-primary-500" />
				</div>
			</div>
			<p class="text-sm text-gray-500 mt-1">{tools.length} tools across {categories.length} categories</p>
		</div>

		<ResourceTabs active="tools" />

		<div class="bg-white border-2 border-gray-300 rounded-lg overflow-hidden">
			<table class="w-full text-sm">
				<thead>
					<tr class="border-b-2 border-gray-300 bg-gray-50">
						<th class="text-left py-2 px-3 font-bold text-gray-700 uppercase text-xs">Tool</th>
						<th class="text-left py-2 px-3 font-bold text-gray-700 uppercase text-xs w-40">Category</th>
						<th class="text-left py-2 px-3 font-bold text-gray-700 uppercase text-xs">Description</th>
					</tr>
				</thead>
				<tbody>
					{tools.map((tool) => {
						const toolSlug = tool.slug;
						return (
							<tr class="border-b border-gray-200 last:border-0 hover:bg-gray-100 transition-colors cursor-pointer" onclick={`window.location.href='/resources/tools/${toolSlug}'`}>
								<td class="py-2 px-3">
									<span class="font-bold text-gray-900">{tool.data.name}</span>
								</td>
								<td class="py-2 px-3 text-gray-600">{tool.data.category}</td>
								<td class="py-2 px-3 text-gray-600">{tool.data.description}</td>
							</tr>
						);
					})}
				</tbody>
			</table>
		</div>
	</div>
</MainLayout>
