---
import MainLayout from '../../layouts/MainLayout.astro';
import PageTitle from '../../components/PageTitle.astro';
import { modules } from '../../data/modules';

// Helper function to get module count for courses in a learning path
function getModuleCountForCourses(courseIds: string[]): number {
  return modules.filter(m => courseIds.includes(m.courseId)).length;
}

const learningPaths = [
	{
		id: 'frontend',
		title: 'Frontend',
		description: 'Master frontend development from HTML to React',
		courses: ['html-css-tailwind', 'javascript-core', 'react'],
		courseLogos: [
			'https://raw.githubusercontent.com/github/explore/main/topics/html/html.png',
			'https://raw.githubusercontent.com/github/explore/main/topics/javascript/javascript.png',
			'https://raw.githubusercontent.com/github/explore/main/topics/react/react.png'
		],
		borderColor: 'border-primary-400',
		bgGradient: 'from-orange-50 via-yellow-50 to-cyan-50',
		accentColor: 'bg-primary-100 text-primary-700 border-primary-300',
		hoverColor: 'group-hover:text-primary-700',
		arrowColor: 'text-primary-600',
		get moduleCount() { return getModuleCountForCourses(this.courses); },
	},
	{
		id: 'backend',
		title: 'Backend',
		description: 'Build APIs and servers: Node.js â†’ Databases â†’ Auth & Security',
		courses: ['node-express', 'databases', 'auth-security'],
		courseLogos: [
			'https://raw.githubusercontent.com/github/explore/main/topics/nodejs/nodejs.png',
			'https://raw.githubusercontent.com/github/explore/main/topics/postgresql/postgresql.png',
			'https://raw.githubusercontent.com/github/explore/main/topics/security/security.png'
		],
		borderColor: 'border-green-500',
		bgGradient: 'from-green-50 via-blue-50 to-red-50',
		accentColor: 'bg-green-100 text-green-700 border-green-300',
		hoverColor: 'group-hover:text-green-700',
		arrowColor: 'text-green-600',
		get moduleCount() { return getModuleCountForCourses(this.courses); },
	},
	{
		id: 'web-fundamentals',
		title: 'Web Fundamentals',
		description: 'Master the essentials: Terminal â†’ HTTP & DevTools â†’ Git',
		courses: ['dev-environment', 'git-mastery', 'javascript-core'],
		courseLogos: [
			'https://raw.githubusercontent.com/github/explore/main/topics/terminal/terminal.png',
			'https://raw.githubusercontent.com/github/explore/main/topics/chrome/chrome.png',
			'https://raw.githubusercontent.com/github/explore/main/topics/git/git.png'
		],
		borderColor: 'border-gray-500',
		bgGradient: 'from-gray-50 via-cyan-50 to-orange-50',
		accentColor: 'bg-gray-200 text-gray-700 border-gray-400',
		hoverColor: 'group-hover:text-gray-700',
		arrowColor: 'text-gray-600',
		get moduleCount() { return getModuleCountForCourses(this.courses); },
	},
	{
		id: 'fullstack',
		title: 'Fullstack',
		description: 'Master fullstack development with Next.js: Frontend + Backend in one codebase',
		courses: ['nextjs'],
		courseLogos: [
			'https://raw.githubusercontent.com/github/explore/main/topics/nextjs/nextjs.png',
			'https://raw.githubusercontent.com/github/explore/main/topics/react/react.png',
			'https://raw.githubusercontent.com/github/explore/main/topics/nodejs/nodejs.png'
		],
		borderColor: 'border-gray-700',
		bgGradient: 'from-gray-100 via-gray-50 to-zinc-50',
		accentColor: 'bg-gray-700 text-white border-gray-800',
		hoverColor: 'group-hover:text-gray-800',
		arrowColor: 'text-gray-700',
		get moduleCount() { return getModuleCountForCourses(this.courses); },
	},
];
---

<MainLayout title="Learning Paths - Guided Progressions">
	<div class="page-enter">
		<!-- Header -->
		<div class="mb-8">
			<PageTitle>
				<h1 slot="title" class="text-2xl font-black text-gray-900 uppercase">Learning Paths</h1>
			</PageTitle>
			<p class="text-gray-600 mt-2">Structured multi-course progressions to master complete skill sets</p>
		</div>

		<!-- Link to Courses -->
		<a href="/courses" class="block mb-8 p-4 border-2 border-gray-300 rounded-lg bg-white hover:border-primary-400 hover:shadow-lg transition-all group">
			<div class="flex items-center gap-3">
				<div class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center">
					<span class="text-gray-600 font-bold">ðŸ“š</span>
				</div>
				<div class="flex-1">
					<h2 class="font-bold text-gray-900 group-hover:text-primary-700 transition-colors">Looking for individual courses?</h2>
					<p class="text-xs text-gray-600">Browse all available courses to learn specific technologies</p>
				</div>
				<span class="text-gray-400 font-bold text-lg group-hover:translate-x-1 group-hover:text-primary-600 transition-all">&rarr;</span>
			</div>
		</a>

		<!-- Learning Paths -->
		<div class="space-y-4 mb-8">
			{learningPaths.map((path) => (
				<a href={`/learning-path/${path.id}`} class={`block p-5 border-2 ${path.borderColor} rounded-lg bg-gradient-to-r ${path.bgGradient} hover:shadow-lg transition-all group relative overflow-hidden`}>
					<div class="absolute top-0 right-0 w-32 h-32 bg-white rounded-full -mr-16 -mt-16 opacity-30 group-hover:scale-150 transition-transform duration-500"></div>
					<div class="relative z-10 flex items-center gap-4">
						<div class="flex items-center gap-1">
							{path.courseLogos.map((logo, idx) => (
								<>
									<img src={logo} alt="" class="w-8 h-8" />
									{idx < path.courseLogos.length - 1 && (
										<span class="text-gray-400 font-bold">&rarr;</span>
									)}
								</>
							))}
						</div>
						<div class="flex-1">
							<div class="flex items-center gap-2 mb-0.5">
								<h2 class={`font-bold text-gray-900 ${path.hoverColor} transition-colors`}>{path.title} Learning Path</h2>
								<span class={`text-[10px] px-2 py-0.5 rounded border uppercase font-bold ${path.accentColor}`}>Guided Path</span>
							</div>
							<p class="text-xs text-gray-600">{path.description}</p>
							<p class="text-[10px] text-gray-500 mt-1">{path.courses.length} courses &middot; {path.moduleCount} modules</p>
						</div>
						<span class={`${path.arrowColor} font-bold text-lg group-hover:translate-x-1 transition-transform`}>&rarr;</span>
					</div>
				</a>
			))}
		</div>

		<!-- Method Section -->
		<div class="border-2 border-gray-300 rounded-lg p-6 bg-white">
			<div class="relative inline-block group mb-4">
				<h2 class="font-bold text-sm uppercase text-gray-700">Why Learning Paths?</h2>
				<span class="absolute -bottom-0.5 left-0 w-8 h-0.5 bg-primary-500 transition-all group-hover:w-full duration-300" />
			</div>

			<div class="grid md:grid-cols-3 gap-6">
				<div>
					<div class="flex items-center gap-2 mb-2">
						<div class="w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
							<span class="text-primary-600 font-bold text-sm">1</span>
						</div>
						<h3 class="font-bold text-gray-900 text-sm">Structured Progression</h3>
					</div>
					<p class="text-xs text-gray-600 ml-10">Learn in the right order. Each course builds on the previous one.</p>
				</div>

				<div>
					<div class="flex items-center gap-2 mb-2">
						<div class="w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
							<span class="text-primary-600 font-bold text-sm">2</span>
						</div>
						<h3 class="font-bold text-gray-900 text-sm">Complete Skill Set</h3>
					</div>
					<p class="text-xs text-gray-600 ml-10">Master everything you need for a specific role or domain.</p>
				</div>

				<div>
					<div class="flex items-center gap-2 mb-2">
						<div class="w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
							<span class="text-primary-600 font-bold text-sm">3</span>
						</div>
						<h3 class="font-bold text-gray-900 text-sm">Track Progress</h3>
					</div>
					<p class="text-xs text-gray-600 ml-10">See your advancement across all courses in the path.</p>
				</div>
			</div>
		</div>
	</div>
</MainLayout>
