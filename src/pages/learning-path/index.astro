---
import MainLayout from '../../layouts/MainLayout.astro';
import PageTitle from '../../components/PageTitle.astro';
import LearningPathCardLarge from '../../components/LearningPathCardLarge.astro';
import LearningPathCardSoon from '../../components/LearningPathCardSoon.astro';
import { modules } from '../../data/modules';

// Helper function to get module count for a course
function getModuleCount(courseId: string): number {
  return modules.filter(m => m.courseId === courseId).length;
}

const learningPaths = [
	{ 
		id: 'web-stack', 
		title: 'VIBECODER BASIS', 
		description: 'Understand the full web development ecosystem from HTTP to deployment', 
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/terminal/terminal.png', 
		difficulty: 'beginner' as const,
		get modules() { return getModuleCount('web-stack'); },
		estimatedTime: '40 hours',
		topics: ['HTTP', 'Frontend', 'Backend', 'Databases', 'DevOps', 'Security']
	},
	{ 
		id: 'git', 
		title: 'Git', 
		description: 'Master version control with Git and GitHub workflows', 
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/git/git.png',
		difficulty: 'beginner' as const,
		get modules() { return getModuleCount('git'); },
		estimatedTime: '20 hours',
		topics: ['Commits', 'Branches', 'Merging', 'Rebase', 'GitHub']
	},
	{ 
		id: 'react', 
		title: 'React', 
		description: 'Master React and TypeScript from JSX to advanced patterns', 
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/react/react.png', 
		difficulty: 'medium' as const,
		get modules() { return getModuleCount('react'); },
		estimatedTime: '35 hours',
		topics: ['JSX', 'Hooks', 'Context', 'Router', 'TypeScript', 'Testing']
	},
	{ 
		id: 'fastapi', 
		title: 'FastAPI', 
		description: 'Build modern, fast APIs with Python and FastAPI', 
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/fastapi/fastapi.png',
		difficulty: 'medium' as const,
		modules: 0,
		estimatedTime: 'Coming soon',
		topics: ['Python', 'APIs', 'Async', 'Pydantic', 'SQLModel'],
		comingSoon: true
	},
	{ 
		id: 'go', 
		title: 'Go', 
		description: 'Learn Go programming language for modern backend development', 
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/go/go.png',
		difficulty: 'medium' as const,
		modules: 0,
		estimatedTime: 'Coming soon',
		topics: ['Basics', 'Concurrency', 'HTTP', 'Testing'],
		comingSoon: true
	},
	{ 
		id: 'python', 
		title: 'Python', 
		description: 'Learn Python programming language from basics to advanced', 
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/python/python.png',
		difficulty: 'beginner' as const,
		modules: 0,
		estimatedTime: 'Coming soon',
		topics: ['Basics', 'OOP', 'Data Structures', 'Libraries'],
		comingSoon: true
	},
];

const availablePaths = learningPaths.filter(p => !p.comingSoon);
const comingSoonPaths = learningPaths.filter(p => p.comingSoon);
---

<MainLayout title="Learning Paths - Choose Your Journey">
	<div class="page-enter">
		<!-- Header -->
		<div class="mb-8">
			<PageTitle>
				<h1 slot="title" class="text-2xl font-black text-gray-900 uppercase">Learning Paths</h1>
			</PageTitle>
			<p class="text-gray-600 mt-2">Choose your learning journey and master modern development</p>
		</div>

		<!-- Available Paths -->
		<div class="grid md:grid-cols-2 gap-6 mb-8">
			{availablePaths.map((path) => (
				<LearningPathCardLarge
					id={path.id}
					title={path.title}
					description={path.description}
					logo={path.logo}
					difficulty={path.difficulty}
					modules={path.modules}
					estimatedTime={path.estimatedTime}
					topics={path.topics}
				/>
			))}
		</div>

		<!-- Coming Soon Section -->
		<div class="mb-8">
			<div class="relative inline-block group mb-4">
				<h2 class="font-bold text-sm uppercase text-gray-700 flex items-center gap-2">
					<span class="w-2 h-2 bg-gray-400 rounded-full" />
					Coming Soon
				</h2>
				<span class="absolute -bottom-0.5 left-0 w-8 h-0.5 bg-gray-400 transition-all group-hover:w-full duration-300" />
			</div>
			
			<div class="grid md:grid-cols-2 gap-4">
				{comingSoonPaths.map((path) => (
					<LearningPathCardSoon
						title={path.title}
						description={path.description}
						logo={path.logo}
						topics={path.topics}
					/>
				))}
			</div>
		</div>

		<!-- Method Section -->
		<div class="border-2 border-gray-300 rounded-lg p-6 bg-white">
			<div class="relative inline-block group mb-4">
				<h2 class="font-bold text-sm uppercase text-gray-700">Our Learning Method</h2>
				<span class="absolute -bottom-0.5 left-0 w-8 h-0.5 bg-primary-500 transition-all group-hover:w-full duration-300" />
			</div>
			
			<div class="grid md:grid-cols-3 gap-6">
				<div>
					<div class="flex items-center gap-2 mb-2">
						<div class="w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
							<span class="text-primary-600 font-bold text-sm">1</span>
						</div>
						<h3 class="font-bold text-gray-900 text-sm">Learn by Doing</h3>
					</div>
					<p class="text-xs text-gray-600 ml-10">Theory meets practice. Every lesson combines concepts with hands-on exercises.</p>
				</div>
				
				<div>
					<div class="flex items-center gap-2 mb-2">
						<div class="w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
							<span class="text-primary-600 font-bold text-sm">2</span>
						</div>
						<h3 class="font-bold text-gray-900 text-sm">Progress Through Practice</h3>
					</div>
					<p class="text-xs text-gray-600 ml-10">Build real skills step by step. Your experience grows as you complete lessons.</p>
				</div>
				
				<div>
					<div class="flex items-center gap-2 mb-2">
						<div class="w-8 h-8 bg-primary-100 rounded-lg flex items-center justify-center">
							<span class="text-primary-600 font-bold text-sm">3</span>
						</div>
						<h3 class="font-bold text-gray-900 text-sm">Stay Active</h3>
					</div>
					<p class="text-xs text-gray-600 ml-10">No passive watching. You code, you test, you learn by taking action.</p>
				</div>
			</div>
		</div>
	</div>
</MainLayout>
