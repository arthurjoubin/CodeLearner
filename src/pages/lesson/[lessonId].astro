---
import MainLayout from '../../layouts/MainLayout.astro';
import LessonPage from '../../pages/_LessonPage';
import { getLesson, getModule } from '../../data/modules';
import { getLearningPathTitles } from '../../data/course-metadata';

const learningPathTitles = getLearningPathTitles();

const { lessonId } = Astro.params;
const lesson = lessonId ? getLesson(lessonId) : undefined;
const module = lesson ? getModule(lesson.moduleId) : undefined;
const pathTitle = module ? learningPathTitles[module.courseId] || module.courseId : '';
const pageTitle = pathTitle && lesson ? `${pathTitle} - ${lesson.title}` : `Lesson - ${lessonId}`;
---

<MainLayout title={pageTitle}>
	<LessonPage client:load lessonId={lessonId} />
</MainLayout>
