---
import MainLayout from '../../layouts/MainLayout.astro';
import PageTitle from '../../components/PageTitle.astro';
import CourseCardLarge from '../../components/CourseCardLarge.astro';
import { modules } from '../../data/modules';

// Helper function to get module count for a course
function getModuleCount(courseId: string): number {
  return modules.filter(m => m.courseId === courseId).length;
}

const courses = [
	{
		id: 'html-css-tailwind',
		title: 'HTML & CSS',
		description: 'Learn the building blocks of every web page: structure, styling, and Tailwind CSS',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/html/html.png',
		difficulty: 'beginner' as const,
		get modules() { return getModuleCount('html-css-tailwind'); },
		estimatedTime: '20 hours',
		topics: ['HTML', 'CSS', 'Flexbox', 'Grid', 'Tailwind', 'Responsive'],
		learningPath: 'Frontend'
	},
	{
		id: 'javascript-core',
		title: 'JavaScript',
		description: 'Master the language of the web: variables, functions, async, and DOM',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/javascript/javascript.png',
		difficulty: 'beginner' as const,
		get modules() { return getModuleCount('javascript-core'); },
		estimatedTime: '25 hours',
		topics: ['Variables', 'Functions', 'Arrays', 'Async/Await', 'DOM', 'ES6+'],
		learningPath: 'Frontend'
	},
	{
		id: 'react',
		title: 'React',
		description: 'Master React and TypeScript from JSX to advanced patterns',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/react/react.png',
		difficulty: 'medium' as const,
		get modules() { return getModuleCount('react'); },
		estimatedTime: '35 hours',
		topics: ['JSX', 'Hooks', 'Context', 'Router', 'TypeScript', 'Testing'],
		learningPath: 'Frontend'
	},
	{
		id: 'node-express',
		title: 'Node.js & Express',
		description: 'Build scalable APIs and servers with JavaScript runtime and Express framework',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/nodejs/nodejs.png',
		difficulty: 'medium' as const,
		get modules() { return getModuleCount('node-express'); },
		estimatedTime: '12 hours',
		topics: ['Node.js', 'Express', 'REST APIs', 'Middleware', 'Routing'],
		learningPath: 'Backend'
	},
	{
		id: 'databases',
		title: 'Databases & SQL',
		description: 'Master data persistence with SQL, PostgreSQL, MongoDB and ORMs',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/postgresql/postgresql.png',
		difficulty: 'medium' as const,
		get modules() { return getModuleCount('databases'); },
		estimatedTime: '10 hours',
		topics: ['SQL', 'PostgreSQL', 'MongoDB', 'ORMs', 'Data Modeling'],
		learningPath: 'Backend'
	},
	{
		id: 'auth-security',
		title: 'Backend Advanced',
		description: 'Authentication, security patterns, architecture and real-time communication',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/docker/docker.png',
		difficulty: 'advanced' as const,
		get modules() { return getModuleCount('auth-security'); },
		estimatedTime: '15 hours',
		topics: ['Auth', 'Security', 'Architecture', 'WebSockets', 'Microservices'],
		learningPath: 'Backend'
	},
	{
		id: 'git-mastery',
		title: 'Git',
		description: 'Master version control with Git and GitHub workflows',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/git/git.png',
		difficulty: 'beginner' as const,
		get modules() { return getModuleCount('git-mastery'); },
		estimatedTime: '20 hours',
		topics: ['Commits', 'Branches', 'Merging', 'Rebase', 'GitHub'],
		learningPath: 'Web Fundamentals'
	},
	{
		id: 'dev-environment',
		title: 'Web Fundamentals',
		description: 'Master essential developer skills: terminal, HTTP, and debugging',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/terminal/terminal.png',
		difficulty: 'beginner' as const,
		get modules() { return getModuleCount('dev-environment'); },
		estimatedTime: '15 hours',
		topics: ['Terminal', 'HTTP', 'DevTools', 'Debugging'],
		learningPath: 'Web Fundamentals'
	},
	{
		id: 'frontend-production',
		title: 'Frontend Production',
		description: 'Level up with testing, performance, security and best practices',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/devops/devops.png',
		difficulty: 'medium' as const,
		get modules() { return getModuleCount('frontend-production'); },
		estimatedTime: '25 hours',
		topics: ['Testing', 'Performance', 'Security', 'PWA'],
		learningPath: 'Frontend'
	},
	{
		id: 'nextjs',
		title: 'Next.js',
		description: 'Full-stack React framework with App Router, Server Components and more',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/nextjs/nextjs.png',
		difficulty: 'advanced' as const,
		get modules() { return getModuleCount('nextjs'); },
		estimatedTime: '30 hours',
		topics: ['App Router', 'Server Components', 'API Routes', 'Auth'],
		learningPath: 'Fullstack'
	},
	{
		id: 'internet-tools',
		title: 'Internet & Tools',
		description: 'Package managers, build tools, and how the web works',
		logo: 'https://raw.githubusercontent.com/github/explore/main/topics/web/web.png',
		difficulty: 'beginner' as const,
		get modules() { return getModuleCount('internet-tools'); },
		estimatedTime: '15 hours',
		topics: ['HTTP', 'NPM', 'Webpack', 'DevTools'],
		learningPath: 'Web Fundamentals'
	},
];
---

<MainLayout title="Courses - All Available Courses">
	<div class="page-enter">
		<!-- Header -->
		<div class="mb-8">
			<PageTitle>
				<h1 slot="title" class="text-2xl font-black text-gray-900 uppercase">Courses</h1>
			</PageTitle>
			<p class="text-gray-600 mt-2">Individual courses to master specific technologies</p>
		</div>

		<!-- Link to Learning Paths -->
		<a href="/learning-path" class="group mb-8 flex items-center gap-3 p-3 rounded-lg border border-gray-200 bg-white hover:border-primary-300 hover:shadow-sm transition-all">
			<div class="w-8 h-8 rounded-md bg-gradient-to-br from-primary-100 to-primary-50 flex items-center justify-center flex-shrink-0">
				<svg class="w-4 h-4 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0121 18.382V7.618a1 1 0 01-.806-.983A1 1 0 0118.553 5.724L15 7m0 13V7m0 0L9 4"/>
				</svg>
			</div>
			<div class="flex-1 min-w-0">
				<div class="flex items-center gap-2">
					<h2 class="text-sm font-medium text-gray-800 group-hover:text-primary-700 transition-colors">Guided learning paths</h2>
					<svg class="w-3 h-3 text-gray-400 group-hover:text-primary-500 group-hover:translate-x-0.5 transition-all" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
					</svg>
				</div>
				<p class="text-[11px] text-gray-500 truncate">Structured, multi-course progressions for your goals</p>
			</div>
		</a>

		<!-- Available Courses -->
		<div class="grid md:grid-cols-2 xl:grid-cols-3 gap-4 mb-8">
			{courses.map((course) => (
				<CourseCardLarge
					id={course.id}
					title={course.title}
					description={course.description}
					logo={course.logo}
					difficulty={course.difficulty}
					modules={course.modules}
					estimatedTime={course.estimatedTime}
					topics={course.topics}
					learningPath={course.learningPath}
				/>
			))}
		</div>
	</div>
</MainLayout>
