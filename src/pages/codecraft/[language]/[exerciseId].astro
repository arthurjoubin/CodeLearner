---
export const prerender = true;

import MainLayout from '../../../layouts/MainLayout.astro';
import CodeCraftExercisePage from '../../_CodeCraftExercisePage';
import { supportedLanguages, languageExercises, getExercisesByLanguage } from '../../../data/language-exercises';

export function getStaticPaths() {
  const paths: { params: { language: string; exerciseId: string } }[] = [];
  
  for (const lang of supportedLanguages) {
    const exercises = getExercisesByLanguage(lang.id);
    for (const exercise of exercises) {
      paths.push({
        params: { 
          language: lang.id,
          exerciseId: exercise.id 
        }
      });
    }
  }
  
  return paths;
}

const { exerciseId } = Astro.params;
const exercise = languageExercises.find(e => e.id === exerciseId);
const language = supportedLanguages.find(l => l.id === exercise?.language);

const pageTitle = exercise ? `${exercise.title} - CodeCraft` : 'Exercise';
---

<MainLayout title={pageTitle}>
  <CodeCraftExercisePage 
    client:load 
    exerciseId={exerciseId} 
    language={language}
    exercise={exercise}
  />
</MainLayout>
